google.maps.__gjsload__('visualization_impl', function(_){var Pnb=function(){if(null!=Onb)return Onb;var a=document.createElement("canvas");return Onb=!(!a.getContext||!a.getContext("2d"))},Y$=function(a){for(var b=Array(a),c=0;c<a;++c)b[c]=0;c=Array(a);for(var d=0;d<a;++d)c[d]=b.concat();return c},Qnb=function(a){if(!a||!a.getLength())return 1;var b=new _.Af;a.forEach(function(l){l&&b.extend(l.location?l.location:l)});var c=b.ub.h,d=b.Qa.h,e=Math.max(b.ub.j-c,b.Qa.j-d);if(1E-9>e){var f=0;a.forEach(function(l){l instanceof _.ue?++f:f+=l.weight});return Math.max(1,
f)}var g=800/e,h=Y$(800),k=1;a.forEach(function(l){if(l){var n=l.location?l.location:l;l=l.weight||1;n=new _.H(Math.max(0,Math.min(799,Math.floor((n.lat()-c)*g))),Math.max(0,Math.min(799,Math.floor((n.lng()-d)*g))));h[n.x][n.y]+=l;k=Math.max(k,h[n.x][n.y])}});return k},Snb=function(a,b){var c=[],d=[],e=1E3/(a.length-1);_.bb(a,function(h,k){c.push(k*e);d.push(_.Tra(h))});a=Array(1001);for(var f=0,g=0;1001>g;++g)g>c[f+1]&&++f,a[g]=f<c.length-1?Rnb(e*f,g,e*(f+1),d[f],d[f+1]):d[d.length-1],a[g].alpha*=
b,a[g].alpha=_.Sd(Math.floor(255*a[g].alpha),0,255);return a},Rnb=function(a,b,c,d,e){if(a==c)return d;a=(b-a)/(c-a);return new _.GB(Math.floor((e.l-d.l)*a+d.l),Math.floor((e.j-d.j)*a+d.j),Math.floor((e.h-d.h)*a+d.h),(e.alpha-d.alpha)*a+d.alpha)},Tnb=function(a,b){this.m=a;this.j=b;this.h=1;this.l=[]},Vnb=function(a,b,c){_.im(b.div,"");if(Pnb()){var d=b.ownerDocument,e,f=e=d.createElement("canvas");_.om(f);f.width=f.height=256;f=f.getContext("2d");var g=1<a.h;b.div.appendChild(e);b=Unb(a,b);e=a.l;
for(var h=Math.floor(e.length/2),k=b.length,l=k-h,n=Y$(k),p=0;p<k;++p)for(var q=b[p],r=n[p],t=0;t<k;++t){var v=q[t];if(v)for(var w=t-h,x=Math.min(l,t+h+1),z=Math.max(h,w);z<x;++z)r[z]+=v*e[z-w]}b=Y$(k-2*h);for(p=0;p<k;++p)for(q=n[p],r=Math.max(h,p-h),t=Math.min(l,p+h+1),v=p-h,w=h,x=0;w<l;++w,++x)if(z=q[w])for(var L=r;L<t;++L)b[L-h][x]+=z*e[L-v];e=Math.ceil(256/a.h);e=f.createImageData(e,e);h=a.get("gradient");k=h[h.length-1];c=h.length/c;l=e.data;p=n=0;for(q=b.length;p<q;++p)for(r=b[p],t=0,v=r.length;t<
v;++t)(w=r[t])||h[0].alpha?(w=h[Math.floor(w*c)]||k,l[n++]=w.l,l[n++]=w.j,l[n++]=w.h,l[n++]=w.alpha):n+=4;g?(d=d.createElement("canvas"),d.width=d.height=256/a.h,d.getContext("2d").putImageData(e,0,0),f.scale(a.h,a.h),f.drawImage(d,0,0)):f.putImageData(e,0,0)}},Unb=function(a,b){var c=a.get("projection");c=_.el(c);var d=a.get("radius");d=Math.round(d/a.h)*a.h;var e=b.og,f=(256+2*d)/a.h,g=Y$(f),h;for(h in e){var k=e[h],l=c.fromLatLngToPoint(new _.ue(k.Da,k.Aa,!0)),n=c.fromLatLngToPoint(new _.ue(k.Ma,
k.Fa,!0)),p=null;p=_.Mn(a.j,new _.Hg(l.x,l.y),b.zoom,function(w){return w});n=_.Mn(a.j,new _.Hg(n.x,n.y),b.zoom,function(w){return w});l=d/256;p=_.Qn(a.j,{wa:Math.min(p.wa,n.wa)+l,xa:Math.min(p.xa,n.xa)+l,Ea:b.zoom});p=new _.H(p.h,p.j);k=a.m.search(k);n=0;for(l=k.length;n<l;++n){var q=k[n],r=c.fromLatLngToPoint(new _.ue(q.sb.x,q.sb.y)),t=0,v=0;r=_.fla(a.j,new _.Hg(r.x,r.y),new _.Hg(p.x,p.y),b.zoom);t=Math.floor(256*r.wa);v=Math.floor(256*r.xa);r=Math.floor((v+d)/a.h);t=Math.floor((t+d)/a.h);0<=r&&
r<f&&0<=t&&t<f&&(g[r][t]+=q.weight)}}return g},$$=function(a,b){b=void 0===b?_.Wn:b;var c=this;this.o=b;this.D=new _.Yf(256,256);this.h={};b=_.ih(-100,-300,100,300);this.C=new _.fB(b,void 0);b=_.ih(-90,-180,90,180);this.l=_.Ara(b,function(d,e){return d.sb.equals(e.sb)&&d.weight==e.weight});this.J=[];this.F=new _.Og;this.j=0;this.m=new Tnb(this.l,this.o);this.m.bindTo("projection",this,"projection",!0);this.m.bindTo("gradient",this,"gradient",!0);this.m.bindTo("radius",this,"radius",!0);a(this.F,function(d){return Vnb(c.m,
d,c.j)});this.H=new _.ki(function(){var d=c.j;c.j=Wnb(c);_.Ud(d,c.j)||Z$(c)},0);this.addListener("data_changed",function(){return Xnb(c)});this.addListener("maxintensity_changed",function(){c.j=Wnb(c);Z$(c)});this.addListener("gradient_changed",function(){Z$(c)});this.addListener("opacity_changed",function(){var d=c.get("opacity"),e;for(e in c.h)c.h.hasOwnProperty(e)&&_.Et(c.h[e].div,d)});this.addListener("radius_changed",function(){for(var d in c.h)if(c.h.hasOwnProperty(d)){var e=c.h[d],f=void 0,
g=e.og;for(f in g)g.hasOwnProperty(f)&&c.C.remove(g[f]);e.og={};Ynb(c,e)}Z$(c)});this.triggersTileLoadEvent=!0},Ynb=function(a,b){var c={wa:b.Eb.x,xa:b.Eb.y,Ea:b.zoom},d=a.get("radius"),e=_.el(a.get("projection")),f=_.Qn(a.o,c);f=new _.H(f.h,f.j);d=_.Us(a.o,c,d/256);c=d.min;d=d.max;c=_.ih(c.h,c.j,d.h,d.j);_.Bra(c,e,f,function(g){g.h=b;b.og[_.$e(g)]=g;_.gB(a.C,g)})},Wnb=function(a){var b=a.get("maxIntensity");return 1<=b?b:Qnb(a.get("data"))},Xnb=function(a){a.l.clear();var b=a.get("data");b&&(b.forEach(function(e){e&&
_.jB(a.l,Znb(e))}),a.H.Gd());Z$(a);for(var c=_.y(a.J),d=c.next();!d.done;d=c.next())_.E.removeListener(d.value);a.J=b?[b.addListener("insert_at",function(e){return $nb(a,e)}),b.addListener("remove_at",function(e,f){return aob(a,f)}),b.addListener("set_at",function(e,f){aob(a,f);$nb(a,e)})]:[]},$nb=function(a,b){if(b=a.get("data").getAt(b))b=Znb(b),_.jB(a.l,b),a.H.Gd(),bob(a,b.sb)},aob=function(a,b){b&&(b=Znb(b),a.l.remove(b),a.H.Gd(),bob(a,b.sb))},bob=function(a,b){b=_.zra(a.C,b);b=_.y(b);for(var c=
b.next();!c.done;c=b.next())_.Pg(a.F,c.value.h)},Z$=function(a){for(var b in a.h)a.h.hasOwnProperty(b)&&_.Pg(a.F,a.h[b])},Znb=function(a){var b=a.location?a.location:a;a=a.weight||1;return{sb:new _.H(b.lat(),b.lng()),weight:a}},cob=function(a,b){var c=new _.rA(_.Rqa(250));this.h=a;a.h=(0,_.Pa)(this.l,this);this.o=b;this.j=c},dob=function(){},Onb,eob="rgba(102, 255, 0, 0);rgba(102, 255, 0, 1);rgba(147, 255, 0, 1);rgba(193, 255, 0, 1);rgba(238, 255, 0, 1);rgba(244, 227, 0, 1);rgba(249, 198, 0, 1);rgba(255, 170, 0, 1);rgba(255, 113, 0, 1);rgba(255, 57, 0, 1);rgba(255, 0, 0, 1)".split(";");_.B(Tnb,_.F);Tnb.prototype.radius_changed=function(){var a=this.get("radius");Pnb()?this.h=20>a?1:2:this.h=4;a=Math.round(a/this.h);for(var b=a/3,c=[],d=-a;d<=a;d++)c.push(Math.exp(-d*d/(2*b*b)));this.l=c};_.A($$,_.aj);$$.prototype.Kd=function(){return{tileSize:{la:this.D.width,oa:this.D.height},xb:this.o,Qd:2,Xd:this.L.bind(this)}};
$$.prototype.L=function(a,b){var c=this,d=(void 0===b?{}:b).Ec,e=document.createElement("div");_.mh(e,this.D);b=this.get("opacity");void 0!==b&&_.Et(e,b);var f={div:e,zoom:a.Ea,Eb:new _.H(a.wa,a.xa),og:{},ownerDocument:document};e.Zc=f;this.h[_.$e(f)]=f;Ynb(this,f);this.j||(this.j=Wnb(this));Vnb(this.m,f,this.j);var g=!1;a=_.ca.Promise.resolve();a.then(function(){g=!0});return{vb:function(){return e},we:function(){return g},loaded:a,release:function(){_.im(e,"");delete c.h[_.$e(f)];d&&d()}}};
$$.prototype.releaseTile=function(a){if(a){var b=a.Zc;a.Zc=null;delete this.h[_.$e(b)];a=this.C;for(var c in b.og)b.og.hasOwnProperty(c)&&a.remove(b.og[c]);_.im(b.div,"")}};cob.prototype.l=function(){_.lA(this.j,(0,_.Pa)(this.m,this))};cob.prototype.m=function(){a:{var a=this.h.yd();for(var b in a){a=a[b];this.h.remove(a);break a}a=null}a&&this.o(a)};dob.prototype.h=function(a){var b=a.de,c=a.de=a.get("map");b&&(a.h&&(a.h.unbindAll(),a.h=null),a.j&&(a.j.release(),a.j=null));if(c){var d=function(){k&&k.unbindAll();k=new $$(g,h);c&&k.bindTo("projection",c);k.bindTo("data",a);k.bindTo("maxIntensity",a);k.bindTo("gradient",e,"colorGradient");k.bindTo("radius",f,"renderingRadius");a.h&&(k.bindTo("opacity",a.h),e.set("opacity",1))};a.h=new _.Lq({dissipating:!0,gradient:eob,opacity:.6,radius:10});a.h.bindTo("dissipating",a);a.h.bindTo("gradient",a);
a.h.bindTo("opacity",a);a.h.bindTo("radius",a);var e=new _.zA(["stringGradient","opacity"],"colorGradient",function(p,q){return Snb(p,q)});e.bindTo("stringGradient",a.h,"gradient",!0);var f=new _.zA(["radius","dissipating","zoom"],"renderingRadius",function(p,q,r){return q?p:Math.min(Math.round(p*Math.pow(2,r)),256)});f.bindTo("radius",a.h);f.bindTo("zoom",c);f.bindTo("dissipating",a.h);var g=function(p,q){new cob(p,q)};b=c.__gm;var h=void 0,k=null;d();var l=k.Kd(),n=_.tg(l);b.j.then(function(p){p.Ui.Tb(function(q){q&&
h!=q.xb&&(h=q.xb,d(),n.set(k.Kd()))})});_.qB(c,n,"overlayLayer",15,{Tq:function(p){a.j&&a.j.release();a.j=p}});_.eg(c,"Lh")}};_.Qe("visualization_impl",new dob);});
